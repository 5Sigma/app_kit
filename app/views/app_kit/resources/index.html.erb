<% content_for :breadcrumb do %>
    <li class="active"><%= resource.plural_display_name %></li>
<% end %>
<div class="panelkit">
    <div class="pk-title"><%= resource_name %></div>
    <div class="pk-body">
        <table>
            <thead>
                <tr>
                    <th class="checkbox-cell"><%= check_box_tag :all %></th>
                    <% resource.table_fields.each do |field| %>
                        <th><%= sort_link [:app_kit, @q], field.sort_field, field.display_name %></th>
                    <% end %>
                </tr>
            </thead>
            <tbody>
                <% @records.each do |record| %>
                    <tr class="data-row" data-url="<%= polymorphic_path([app_kit,record]) %>">
                        <td class="checkbox-cell"><%= check_box_tag record.id %></td>
                        <% resource.table_fields.each do |field| %>
                            <td><%= format_attribute(record,field) %></td>
                        <% end %>
                    </tr>
                <% end %>
            </tbody>
        </table>
    </div>
</div>
<div class="buttons">
    <%= link_to "New #{resource_name.singularize}", new_polymorphic_path([app_kit, model]), class: 'primary' %>
</div>
<button type="button" class="filter-trigger sliding-menu-button">
  <img src="https://raw.githubusercontent.com/thoughtbot/refills/master/source/images/menu.png" alt="Menu Icon">
</button>

<nav class="filter-panel">
<%= search_form_for @q, url: polymorphic_url([app_kit, model]) do |f| %>
    <% resource.fields.each do |field|  %>
        <% if field.name != :name %>
            <%= f.label "#{field.name}_cont" %>
            <%= f.search_field "#{field.name}_cont".to_sym, placeholder: "Filter by #{field.display_name.downcase}" %>
        <% end %>
    <% end %>
    <div class="buttons">
        <%= f.submit %>
    </div>
<% end %>
</nav>

<div class="filter-screen"></div> 
